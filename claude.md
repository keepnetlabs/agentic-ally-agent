# Agentic Ally - Project Guide

**Last Updated:** January 10, 2026

> âš ï¸ **IMPORTANT:** The documentation has been moved to the `docs/` directory for better organization.

---

## ðŸ“š Essential Links

| Document | Purpose |
|----------|---------|
| **[HANDOVER.md](./docs/HANDOVER.md)** | **START HERE.** Critical configs, "Gotchas", and Roadmap. |
| **[ARCHITECTURE.md](./docs/ARCHITECTURE.md)** | 5-Agent System, State Machines, and Resilience Strategy. |
| **[DEVELOPMENT.md](./docs/DEVELOPMENT.md)** | How to run, debug (`debug-workflow.ts`), and test. |
| **[DATA_MODEL.md](./docs/DATA_MODEL.md)** | KV Schemas, Types, and Validators. |
| **[WORKFLOWS.md](./docs/WORKFLOWS.md)** | Mermaid diagrams of all logic flows. |

---

## ðŸŽ¯ Quick Start

Generated by **Mastra** framework on **Cloudflare Workers**.

### 1. New Developer?
Read **[HANDOVER.md](./docs/HANDOVER.md)** first. It explains the critical "Timeouts" and "Thread ID" rules you must knw.

### 2. Local Debugging
We use a dedicated script to test the Autonomous Service without Cron jobs:

```bash
# Debug the Autonomous Workflow (User/Group generation)
npx tsx src/debug-workflow.ts
```

### 3. API Test
```bash
# Test the reactive Chat endpoint
curl -X POST http://localhost:8000/chat \
  -H "Content-Type: application/json" \
  -d '{"prompt": "Create phishing training"}'
```

---

## ðŸ—ï¸ Critical Constants (Cheatsheet)

| Config | Value | Why? |
|--------|-------|------|
| `LONG_RUNNING_AGENT_TIMEOUT_MS` | `600,000` (10m) | Microlearning generation takes >3 mins. |
| `AGENT_CALL_TIMEOUT_MS` | `90,000` (1.5m) | Standard chat timeout. |
| **Thread ID Pattern** | `phishing-{uid}-{ts}` | Must use timestamp to prevent hallucination. |

---

## ðŸ“‚ Core Structure

```
src/mastra/
â”œâ”€â”€ agents/             # Microlearning, Phishing, UserInfo, Policy, Orchestrator
â”œâ”€â”€ services/           # Core Logic (Autonomous, KV, Health, Error)
â”œâ”€â”€ tools/              # 20+ Tools (Generation, Analysis, Inbox)
â”œâ”€â”€ workflows/          # Parallel Execution Flows
â””â”€â”€ constants.ts        # CENTRAL CONFIGURATION (Edit this, no magic numbers)
```
